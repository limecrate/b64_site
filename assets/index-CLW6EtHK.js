(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))r(n);new MutationObserver(n=>{for(const l of n)if(l.type==="childList")for(const m of l.addedNodes)m.tagName==="LINK"&&m.rel==="modulepreload"&&r(m)}).observe(document,{childList:!0,subtree:!0});function o(n){const l={};return n.integrity&&(l.integrity=n.integrity),n.referrerPolicy&&(l.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?l.credentials="include":n.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function r(n){if(n.ep)return;n.ep=!0;const l=o(n);fetch(n.href,l)}})();function v(e,t=!1,o=!1){return Uint8Array.prototype.toBase64?(console.log("Encode with toBase64!"),e.toBase64({alphabet:t?"base64url":"base64",omitPadding:o})):(console.log("Encode with compatible mode"),q(e,t,o))}function $(e,t=!1){return Uint8Array.fromBase64?(console.log("Decode with fromBase64!"),Uint8Array.fromBase64(e,{alphabet:t?"base64url":"base64"})):(console.log("Decode with compatible mode"),F(e,t))}function q(e,t=!1,o=!1){const r=Array.from(e,l=>String.fromCodePoint(l)).join(""),n=btoa(r);return!t&&!o?n:t?o?n.replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,""):n.replace(/\+/g,"-").replace(/\//g,"_"):n.replace(/=+$/,"")}function F(e,t=!1){const o=t?e.replace(/-/g,"+").replace(/_/g,"/"):e,r=atob(o);return Uint8Array.from(r,n=>n.codePointAt(0))}const O=[{ext:"png",sig:[137,80,78,71,13,10,26,10]},{ext:"jpg",sig:[255,216,255,224]},{ext:"jpg",sig:[255,216,255,225]},{ext:"webp",sig:[82,73,70,70,null,null,null,null,87,69,66,80]},{ext:"gif",sig:[71,73,70,56,55,97]},{ext:"gif",sig:[71,73,70,56,57,97]},{ext:"bmp",sig:[66,77]},{ext:"mp3",sig:[255,251]},{ext:"ogg",sig:[79,103,103,83]},{ext:"wav",sig:[82,73,70,70,null,null,null,null,87,65,86,69]},{ext:"zip",sig:[80,75,3,4]},{ext:"7z",sig:[55,122,188,175,39,28]},{ext:"gz",sig:[31,139]},{ext:"xz",sig:[253,55,122,88,90,0]},{ext:"ttf",sig:[116,114,117,101,0]},{ext:"otf",sig:[79,84,84,79,0]},{ext:"woff",sig:[119,79,70,70]},{ext:"woff2",sig:[119,79,70,50]},{ext:"pdf",sig:[37,80,68,70,45]},{ext:"wasm",sig:[0,97,115,109]},{ext:"exe",sig:[90,77]},{ext:"webm",sig:[26,69,223,163]},{ext:"doc",sig:[208,207,17,224,161,177,26,225]},{ext:"heif",sig:[null,null,null,null,0,0,0,24,102,116,121,112,104,101,105,99]},{ext:"mp4",sig:[null,null,null,null,102,116,121,112,105,115,111,109]},{ext:"mov",sig:[null,null,null,null,102,116,121,112,113,116,32,32]},{ext:"mov",sig:[null,null,null,null,109,111,111,118]},{ext:"avif",sig:[null,null,null,null,102,116,121,112,97,118,105,102]}];function T(e){let t=0;for(const o of O){for(t=0;t<o.sig.length&&!(o.sig[t]!==null&&e[t]!==o.sig[t]);t+=1);if(t===o.sig.length)return o.ext}return"txt"}function p(e,t=!0){if(!e)return"";let o;return e<1024?o=`${e} B`:e<1048576?o=`${e%1024?(e/1024).toFixed(1):e/1024} KiB`:e<1073741824?o=`${e%1048576?(e/1048576).toFixed(1):e/1048576} MiB`:e<1099511627776?o=`${e%1073741824?(e/1073741824).toFixed(1):e/1073741824} GiB`:e<0x4000000000000?o=`${e%1099511627776?(e/1099511627776).toFixed(1):e/1099511627776} TiB`:o=`${e%0x4000000000000?(e/0x4000000000000).toFixed(1):e/0x4000000000000} PiB`,t?`(${o})`:o}function y(e,t,o=!0){return o?e.startsWith(".")?`.${e.slice(1).replace(/\./g,"_")}.${t}`:`${e.replace(/\./g,"_")}.${t}`:`${e}.${t}`}const i=document.querySelector("#file-input"),s=document.querySelector("#download"),A=document.querySelector("#to-b64"),b=document.querySelector("#to-b64-url-safe"),B=document.querySelector("#to-b64-omit-padding"),E=document.querySelector("#to-bin"),w=document.querySelector("#to-bin-url-safe"),C=document.querySelector("#file-names"),I=document.querySelector("#file-size"),S=document.querySelector("#download > span"),u=document.querySelector("#message"),h=document.querySelector("#processing-modal");let c=localStorage.getItem("isToB64Url")==="true",a=localStorage.getItem("isToB64Omit")==="true",x=localStorage.getItem("isToBinUrl")==="true";f(b,c);f(B,a);f(w,x);i.addEventListener("change",function(e){var t,o;C.textContent=((t=i.files[0])==null?void 0:t.name.normalize("NFC"))??"",I.textContent=`${p((o=i.files[0])==null?void 0:o.size)}`,g(u),g(s)});A.addEventListener("click",function(){if(!i.files.length){d("No file");return}U("Encoding...");const e=new FileReader;e.onload=function(){try{const t=new Uint8Array(e.result),o=v(t,c,a),r=new Blob([o],{type:"text/plain"}),n=URL.createObjectURL(r),l=y(i.files[0].name,"txt");S.textContent=p(r.size,!1),s.href=n,s.download=l,L(s)}catch(t){console.error(t),d(`Failed encoding..
File size might be too large.`)}finally{h.close()}},e.readAsArrayBuffer(i.files[0])});E.addEventListener("click",function(){if(!i.files.length){d("No file");return}U("Decoding...");const e=new FileReader;e.onload=function(){try{const t=$(e.result,x);if(t.length===0)throw new Error("Something wrong. Result is 0 bytes");const o=new Blob([t]),r=URL.createObjectURL(o),n=y(i.files[0].name,T(t));S.textContent=p(o.size,!1),s.href=r,s.download=n,L(s)}catch(t){console.error(t),d(`Failed decoding..
`+(x?"This file might be invalid or too large.":"Try to use URL safe option."))}finally{h.close()}},e.readAsText(i.files[0])});b.addEventListener("click",function(){c=!c,f(this,c),localStorage.setItem("isToB64Url",c)});B.addEventListener("click",function(){a=!a,f(this,a),localStorage.setItem("isToB64Omit",a)});w.addEventListener("click",function(){x=!x,f(this,x),localStorage.setItem("isToBinUrl",x)});function f(e,t){t?(e.classList.remove("push"),e.classList.add("half-push")):(e.classList.remove("half-push"),e.classList.add("push"))}function d(e){u.textContent=e,u.classList.remove("hide")}function g(e){e.classList.add("hide")}function L(e){e.classList.remove("hide")}function U(e){g(u),g(s),document.querySelector("#processing-modal > span").textContent=e,h.showModal()}
